create user testtt1 identified by 'testtt1';
create database tt1_test;
GRANT ALL ON *.* TO testtt1;
use test;
DROP TABLE IF EXISTS t0,t1,t2,t3,t4,t5;
DROP VIEW IF EXISTS v1;
#
# Bug#18925: subqueries with MIN/MAX functions on INFORMARTION_SCHEMA
#
SELECT t.table_name, c1.column_name
FROM information_schema.tables t
INNER JOIN
information_schema.columns c1
ON t.table_schema = c1.table_schema AND
t.table_name = c1.table_name
WHERE t.table_schema = 'information_schema' AND
c1.ordinal_position =
( SELECT COALESCE(MIN(c2.ordinal_position),1)
FROM information_schema.columns c2
WHERE c2.table_schema = t.table_schema AND
c2.table_name = t.table_name AND
c2.column_name LIKE '%SCHEMA%')
AND t.table_name NOT LIKE 'ndb%'
AND t.table_name NOT LIKE 'innodb%';
table_name	column_name
CHARACTER_SETS	CHARACTER_SET_NAME
CHECK_CONSTRAINTS	CONSTRAINT_SCHEMA
COLLATIONS	COLLATION_NAME
COLLATION_CHARACTER_SET_APPLICABILITY	COLLATION_NAME
COLUMNS	TABLE_SCHEMA
COLUMN_PRIVILEGES	TABLE_SCHEMA
CONNECTION_CONTROL_FAILED_LOGIN_ATTEMPTS	USERHOST
ENGINES	ENGINE
FILES	TABLE_SCHEMA
GLOBAL_STATUS	VARIABLE_NAME
GLOBAL_VARIABLES	VARIABLE_NAME
KEY_COLUMN_USAGE	CONSTRAINT_SCHEMA
PARAMETERS	SPECIFIC_SCHEMA
PARTITIONS	TABLE_SCHEMA
PROCESSLIST	ID
QUERY_RESPONSE_TIME	RESPONSE_TIME
REFERENTIAL_CONSTRAINTS	CONSTRAINT_SCHEMA
ROUTINES	ROUTINE_SCHEMA
SCHEMATA	SCHEMA_NAME
SCHEMA_PRIVILEGES	TABLE_SCHEMA
SESSION_STATUS	VARIABLE_NAME
SESSION_VARIABLES	VARIABLE_NAME
STATISTICS	TABLE_SCHEMA
TABLES	TABLE_SCHEMA
TABLE_CONSTRAINTS	CONSTRAINT_SCHEMA
TABLE_PRIVILEGES	TABLE_SCHEMA
TRIGGERS	TRIGGER_SCHEMA
USER_PRIVILEGES	GRANTEE
VIEWS	TABLE_SCHEMA
VIEW_TABLE_USAGE	VIEW_SCHEMA
SELECT t.table_name, c1.column_name
FROM information_schema.tables t
INNER JOIN
information_schema.columns c1
ON t.table_schema = c1.table_schema AND
t.table_name = c1.table_name
WHERE t.table_schema = 'information_schema' AND
c1.ordinal_position =
( SELECT COALESCE(MIN(c2.ordinal_position),1)
FROM information_schema.columns c2
WHERE c2.table_schema = 'information_schema' AND
c2.table_name = t.table_name AND
c2.column_name LIKE '%SCHEMA%')
AND t.table_name NOT LIKE 'ndb%'
AND t.table_name NOT LIKE 'innodb%';
table_name	column_name
CHARACTER_SETS	CHARACTER_SET_NAME
CHECK_CONSTRAINTS	CONSTRAINT_SCHEMA
COLLATIONS	COLLATION_NAME
COLLATION_CHARACTER_SET_APPLICABILITY	COLLATION_NAME
COLUMNS	TABLE_SCHEMA
COLUMN_PRIVILEGES	TABLE_SCHEMA
CONNECTION_CONTROL_FAILED_LOGIN_ATTEMPTS	USERHOST
ENGINES	ENGINE
FILES	TABLE_SCHEMA
GLOBAL_STATUS	VARIABLE_NAME
GLOBAL_VARIABLES	VARIABLE_NAME
KEY_COLUMN_USAGE	CONSTRAINT_SCHEMA
PARAMETERS	SPECIFIC_SCHEMA
PARTITIONS	TABLE_SCHEMA
PROCESSLIST	ID
QUERY_RESPONSE_TIME	RESPONSE_TIME
REFERENTIAL_CONSTRAINTS	CONSTRAINT_SCHEMA
ROUTINES	ROUTINE_SCHEMA
SCHEMATA	SCHEMA_NAME
SCHEMA_PRIVILEGES	TABLE_SCHEMA
SESSION_STATUS	VARIABLE_NAME
SESSION_VARIABLES	VARIABLE_NAME
STATISTICS	TABLE_SCHEMA
TABLES	TABLE_SCHEMA
TABLE_CONSTRAINTS	CONSTRAINT_SCHEMA
TABLE_PRIVILEGES	TABLE_SCHEMA
TRIGGERS	TRIGGER_SCHEMA
USER_PRIVILEGES	GRANTEE
VIEWS	TABLE_SCHEMA
VIEW_TABLE_USAGE	VIEW_SCHEMA
SELECT t.table_name, c1.column_name
FROM information_schema.tables t
INNER JOIN
information_schema.columns c1
ON t.table_schema = c1.table_schema AND
t.table_name = c1.table_name
WHERE t.table_schema = 'information_schema' AND
c1.ordinal_position =
( SELECT COALESCE(MIN(c2.ordinal_position),1)
FROM information_schema.columns c2
WHERE c2.table_schema = t.table_schema AND
c2.table_name = t.table_name AND
c2.column_name LIKE '%SCHEMA%')
AND t.table_name NOT LIKE 'ndb%'
AND t.table_name NOT LIKE 'innodb%';
table_name	column_name
CHARACTER_SETS	CHARACTER_SET_NAME
CHECK_CONSTRAINTS	CONSTRAINT_SCHEMA
COLLATIONS	COLLATION_NAME
COLLATION_CHARACTER_SET_APPLICABILITY	COLLATION_NAME
COLUMNS	TABLE_SCHEMA
COLUMN_PRIVILEGES	TABLE_SCHEMA
CONNECTION_CONTROL_FAILED_LOGIN_ATTEMPTS	USERHOST
ENGINES	ENGINE
FILES	TABLE_SCHEMA
GLOBAL_STATUS	VARIABLE_NAME
GLOBAL_VARIABLES	VARIABLE_NAME
KEY_COLUMN_USAGE	CONSTRAINT_SCHEMA
PARAMETERS	SPECIFIC_SCHEMA
PARTITIONS	TABLE_SCHEMA
PROCESSLIST	ID
QUERY_RESPONSE_TIME	RESPONSE_TIME
REFERENTIAL_CONSTRAINTS	CONSTRAINT_SCHEMA
ROUTINES	ROUTINE_SCHEMA
SCHEMATA	SCHEMA_NAME
SCHEMA_PRIVILEGES	TABLE_SCHEMA
SESSION_STATUS	VARIABLE_NAME
SESSION_VARIABLES	VARIABLE_NAME
STATISTICS	TABLE_SCHEMA
TABLES	TABLE_SCHEMA
TABLE_CONSTRAINTS	CONSTRAINT_SCHEMA
TABLE_PRIVILEGES	TABLE_SCHEMA
TRIGGERS	TRIGGER_SCHEMA
USER_PRIVILEGES	GRANTEE
VIEWS	TABLE_SCHEMA
VIEW_TABLE_USAGE	VIEW_SCHEMA
SELECT t.table_name, c1.column_name
FROM information_schema.tables t
INNER JOIN
information_schema.columns c1
ON t.table_schema = c1.table_schema AND
t.table_name = c1.table_name
WHERE t.table_schema = 'information_schema' AND
c1.ordinal_position =
( SELECT COALESCE(MIN(c2.ordinal_position),1)
FROM information_schema.columns c2
WHERE c2.table_schema = 'information_schema' AND
c2.table_name = t.table_name AND
c2.column_name LIKE '%SCHEMA%')
AND t.table_name NOT LIKE 'ndb%'
AND t.table_name NOT LIKE 'innodb%';
table_name	column_name
CHARACTER_SETS	CHARACTER_SET_NAME
CHECK_CONSTRAINTS	CONSTRAINT_SCHEMA
COLLATIONS	COLLATION_NAME
COLLATION_CHARACTER_SET_APPLICABILITY	COLLATION_NAME
COLUMNS	TABLE_SCHEMA
COLUMN_PRIVILEGES	TABLE_SCHEMA
CONNECTION_CONTROL_FAILED_LOGIN_ATTEMPTS	USERHOST
ENGINES	ENGINE
FILES	TABLE_SCHEMA
GLOBAL_STATUS	VARIABLE_NAME
GLOBAL_VARIABLES	VARIABLE_NAME
KEY_COLUMN_USAGE	CONSTRAINT_SCHEMA
PARAMETERS	SPECIFIC_SCHEMA
PARTITIONS	TABLE_SCHEMA
PROCESSLIST	ID
QUERY_RESPONSE_TIME	RESPONSE_TIME
REFERENTIAL_CONSTRAINTS	CONSTRAINT_SCHEMA
ROUTINES	ROUTINE_SCHEMA
SCHEMATA	SCHEMA_NAME
SCHEMA_PRIVILEGES	TABLE_SCHEMA
SESSION_STATUS	VARIABLE_NAME
SESSION_VARIABLES	VARIABLE_NAME
STATISTICS	TABLE_SCHEMA
TABLES	TABLE_SCHEMA
TABLE_CONSTRAINTS	CONSTRAINT_SCHEMA
TABLE_PRIVILEGES	TABLE_SCHEMA
TRIGGERS	TRIGGER_SCHEMA
USER_PRIVILEGES	GRANTEE
VIEWS	TABLE_SCHEMA
VIEW_TABLE_USAGE	VIEW_SCHEMA
select 1;
1
1
use test;
create table if not exists t1(i1 int, v2 varchar(80), i3 char(20),i4 float, d4 datetime(6),i5 decimal(5,3), primary key(i1));
create table if not exists t2(i1 int, v2 varchar(80), i3 char(20),i4 float, d4 datetime(6),i5 decimal(5,3), primary key(i1));
create table if not exists t3(i1 int, v2 varchar(80), i3 char(20),i4 float, d4 datetime(6),i5 decimal(5,3), primary key(i1));
create table if not exists t4(i1 int, v2 varchar(80), i3 char(20),i4 float, d4 datetime(6),i5 decimal(5,3), primary key(i1));
SELECT t.table_name, c1.column_name
FROM information_schema.tables t
INNER JOIN
information_schema.columns c1
ON t.table_schema = c1.table_schema AND
t.table_name = c1.table_name
WHERE t.table_schema = 'information_schema' AND
c1.ordinal_position =
( SELECT COALESCE(MIN(c2.ordinal_position),1)
FROM information_schema.columns c2
WHERE c2.table_schema = t.table_schema AND
c2.table_name = t.table_name AND
c2.column_name LIKE '%SCHEMA%')
AND t.table_name NOT LIKE 'ndb%'
AND t.table_name NOT LIKE 'innodb%';
table_name	column_name
SESSION_VARIABLES	VARIABLE_NAME
TABLE_PRIVILEGES	TABLE_SCHEMA
USER_PRIVILEGES	GRANTEE
SCHEMA_PRIVILEGES	TABLE_SCHEMA
TABLE_CONSTRAINTS	CONSTRAINT_SCHEMA
GLOBAL_STATUS	VARIABLE_NAME
PARTITIONS	TABLE_SCHEMA
SESSION_STATUS	VARIABLE_NAME
PARAMETERS	SPECIFIC_SCHEMA
REFERENTIAL_CONSTRAINTS	CONSTRAINT_SCHEMA
TRIGGERS	TRIGGER_SCHEMA
CHECK_CONSTRAINTS	CONSTRAINT_SCHEMA
SCHEMATA	SCHEMA_NAME
CHARACTER_SETS	CHARACTER_SET_NAME
GLOBAL_VARIABLES	VARIABLE_NAME
STATISTICS	TABLE_SCHEMA
VIEWS	TABLE_SCHEMA
TABLES	TABLE_SCHEMA
COLLATIONS	COLLATION_NAME
COLLATION_CHARACTER_SET_APPLICABILITY	COLLATION_NAME
PROCESSLIST	ID
KEY_COLUMN_USAGE	CONSTRAINT_SCHEMA
ENGINES	ENGINE
ROUTINES	ROUTINE_SCHEMA
COLUMNS	TABLE_SCHEMA
CONNECTION_CONTROL_FAILED_LOGIN_ATTEMPTS	USERHOST
COLUMN_PRIVILEGES	TABLE_SCHEMA
VIEW_TABLE_USAGE	VIEW_SCHEMA
FILES	TABLE_SCHEMA
QUERY_RESPONSE_TIME	RESPONSE_TIME
SELECT t.table_name, c1.column_name
FROM information_schema.tables t
INNER JOIN
information_schema.columns c1
ON t.table_schema = c1.table_schema AND
t.table_name = c1.table_name
WHERE t.table_schema = 'information_schema' AND
c1.ordinal_position =
( SELECT COALESCE(MIN(c2.ordinal_position),1)
FROM information_schema.columns c2
WHERE c2.table_schema = 'information_schema' AND
c2.table_name = t.table_name AND
c2.column_name LIKE '%SCHEMA%')
AND t.table_name NOT LIKE 'ndb%'
AND t.table_name NOT LIKE 'innodb%';
table_name	column_name
CHARACTER_SETS	CHARACTER_SET_NAME
CHECK_CONSTRAINTS	CONSTRAINT_SCHEMA
COLLATIONS	COLLATION_NAME
COLLATION_CHARACTER_SET_APPLICABILITY	COLLATION_NAME
COLUMNS	TABLE_SCHEMA
COLUMN_PRIVILEGES	TABLE_SCHEMA
CONNECTION_CONTROL_FAILED_LOGIN_ATTEMPTS	USERHOST
ENGINES	ENGINE
FILES	TABLE_SCHEMA
GLOBAL_STATUS	VARIABLE_NAME
GLOBAL_VARIABLES	VARIABLE_NAME
KEY_COLUMN_USAGE	CONSTRAINT_SCHEMA
PARAMETERS	SPECIFIC_SCHEMA
PARTITIONS	TABLE_SCHEMA
PROCESSLIST	ID
QUERY_RESPONSE_TIME	RESPONSE_TIME
REFERENTIAL_CONSTRAINTS	CONSTRAINT_SCHEMA
ROUTINES	ROUTINE_SCHEMA
SCHEMATA	SCHEMA_NAME
SCHEMA_PRIVILEGES	TABLE_SCHEMA
SESSION_STATUS	VARIABLE_NAME
SESSION_VARIABLES	VARIABLE_NAME
STATISTICS	TABLE_SCHEMA
TABLES	TABLE_SCHEMA
TABLE_CONSTRAINTS	CONSTRAINT_SCHEMA
TABLE_PRIVILEGES	TABLE_SCHEMA
TRIGGERS	TRIGGER_SCHEMA
USER_PRIVILEGES	GRANTEE
VIEWS	TABLE_SCHEMA
VIEW_TABLE_USAGE	VIEW_SCHEMA
